<div class="card mb-3 position-relative" data-code="{{ include.code }}" data-semester="{{ page.semester }}">
    <div class="card-body">
        <!-- Collapsible header with rotating arrow -->
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="card-title mb-0">{{ include.title }}</h5>

            <button class="btn btn-sm btn-link text-decoration-none p-0"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#{{ include.code | replace: '.', '-' }}-details"
                    aria-expanded="false"
                    aria-controls="{{ include.code | replace: '.', '-' }}-details">
                <i class="bi bi-chevron-right caret-icon text-dark fs-2 ms-2" aria-hidden="true"></i>
            </button>
        </div>

        <!-- Summary Info -->
        <p class="mb-1"><strong> {{ include.code }}</strong></p>
        <p class="mb-1">{{ include.semesters | join: ", " }}</p>
        <div class="enroll-btn-container">
            {% if include.taken %}
                <i
                        class="bi bi-check-circle-fill text-success position-absolute end-0 top-50 translate-middle-y me-3 fs-4"
                        aria-hidden="true"
                ></i>
                <span class="text-success fw-bold small me-2">
                    Taken {{ include.taken }}
                </span>
            {% elsif page.semester %}
                <a
                        href="#"
                        class="btn btn-primary btn-sm enroll-btn px-2"
                        data-code="{{ include.code }}"
                        data-semester="{{ page.semester }}"
                >
                    Enroll
                </a>
            {% endif %}
        </div>


        <!-- Expanded details -->
        <div class="collapse mt-2" id="{{ include.code | replace: '.', '-' }}-details">
            <p class="mb-1"><strong>Modality:</strong> {{ include.modality }}</p>
            <p class="mb-1">{{ include.credits }} Credits</p>
            <p><strong>Instructor:</strong> {{ include.teacher }}</p>
            <p>{{ include.description }}</p>
        </div>
    </div>
</div>

<!-- CSS to rotate arrow when expanded -->
<style>
    button[aria-expanded="true"] .caret-icon {
        transition: transform 0.2s ease-in-out;
    }
    .caret-icon {
        display: inline-block;
        transition: transform 0.2s ease-in-out;
    }
</style>
